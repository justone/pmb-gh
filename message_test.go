package main

import "testing"

func assert(t *testing.T, cond bool, msg string) {
	if !cond {
		t.Errorf(msg)
	}
}

func TestBadJSON(t *testing.T) {
	_, _, err := parseEvent("watch", `{"action":"started"`)

	if err == nil {
		t.Errorf("error should be thrown")
	}
}

func TestWatch(t *testing.T) {
	name := "watch"
	json := `{"action":"started","repository":{"id":48729606,"name":"repositoryname","full_name":"owninguser/repositoryname","owner":{"login":"owninguser","id":8082,"avatar_url":"https://avatars.githubusercontent.com/u/8082?v=3","gravatar_id":"","url":"https://api.github.com/users/owninguser","html_url":"https://github.com/owninguser","followers_url":"https://api.github.com/users/owninguser/followers","following_url":"https://api.github.com/users/owninguser/following{/other_user}","gists_url":"https://api.github.com/users/owninguser/gists{/gist_id}","starred_url":"https://api.github.com/users/owninguser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owninguser/subscriptions","organizations_url":"https://api.github.com/users/owninguser/orgs","repos_url":"https://api.github.com/users/owninguser/repos","events_url":"https://api.github.com/users/owninguser/events{/privacy}","received_events_url":"https://api.github.com/users/owninguser/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/owninguser/repositoryname","description":"","fork":false,"url":"https://api.github.com/repos/owninguser/repositoryname","forks_url":"https://api.github.com/repos/owninguser/repositoryname/forks","keys_url":"https://api.github.com/repos/owninguser/repositoryname/keys{/key_id}","collaborators_url":"https://api.github.com/repos/owninguser/repositoryname/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/owninguser/repositoryname/teams","hooks_url":"https://api.github.com/repos/owninguser/repositoryname/hooks","issue_events_url":"https://api.github.com/repos/owninguser/repositoryname/issues/events{/number}","events_url":"https://api.github.com/repos/owninguser/repositoryname/events","assignees_url":"https://api.github.com/repos/owninguser/repositoryname/assignees{/user}","branches_url":"https://api.github.com/repos/owninguser/repositoryname/branches{/branch}","tags_url":"https://api.github.com/repos/owninguser/repositoryname/tags","blobs_url":"https://api.github.com/repos/owninguser/repositoryname/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/owninguser/repositoryname/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/owninguser/repositoryname/git/refs{/sha}","trees_url":"https://api.github.com/repos/owninguser/repositoryname/git/trees{/sha}","statuses_url":"https://api.github.com/repos/owninguser/repositoryname/statuses/{sha}","languages_url":"https://api.github.com/repos/owninguser/repositoryname/languages","stargazers_url":"https://api.github.com/repos/owninguser/repositoryname/stargazers","contributors_url":"https://api.github.com/repos/owninguser/repositoryname/contributors","subscribers_url":"https://api.github.com/repos/owninguser/repositoryname/subscribers","subscription_url":"https://api.github.com/repos/owninguser/repositoryname/subscription","commits_url":"https://api.github.com/repos/owninguser/repositoryname/commits{/sha}","git_commits_url":"https://api.github.com/repos/owninguser/repositoryname/git/commits{/sha}","comments_url":"https://api.github.com/repos/owninguser/repositoryname/comments{/number}","issue_comment_url":"https://api.github.com/repos/owninguser/repositoryname/issues/comments{/number}","contents_url":"https://api.github.com/repos/owninguser/repositoryname/contents/{+path}","compare_url":"https://api.github.com/repos/owninguser/repositoryname/compare/{base}...{head}","merges_url":"https://api.github.com/repos/owninguser/repositoryname/merges","archive_url":"https://api.github.com/repos/owninguser/repositoryname/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/owninguser/repositoryname/downloads","issues_url":"https://api.github.com/repos/owninguser/repositoryname/issues{/number}","pulls_url":"https://api.github.com/repos/owninguser/repositoryname/pulls{/number}","milestones_url":"https://api.github.com/repos/owninguser/repositoryname/milestones{/number}","notifications_url":"https://api.github.com/repos/owninguser/repositoryname/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/owninguser/repositoryname/labels{/name}","releases_url":"https://api.github.com/repos/owninguser/repositoryname/releases{/id}","created_at":"2015-12-29T05:37:45Z","updated_at":"2015-12-29T05:57:40Z","pushed_at":"2015-12-29T05:37:45Z","git_url":"git://github.com/owninguser/repositoryname.git","ssh_url":"git@github.com:owninguser/repositoryname.git","clone_url":"https://github.com/owninguser/repositoryname.git","svn_url":"https://github.com/owninguser/repositoryname","homepage":null,"size":0,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"open_issues_count":0,"forks":0,"open_issues":0,"watchers":0,"default_branch":"master"},"sender":{"login":"otheruser","id":1062602,"avatar_url":"https://avatars.githubusercontent.com/u/1062602?v=3","gravatar_id":"","url":"https://api.github.com/users/otheruser","html_url":"https://github.com/otheruser","followers_url":"https://api.github.com/users/otheruser/followers","following_url":"https://api.github.com/users/otheruser/following{/other_user}","gists_url":"https://api.github.com/users/otheruser/gists{/gist_id}","starred_url":"https://api.github.com/users/otheruser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/otheruser/subscriptions","organizations_url":"https://api.github.com/users/otheruser/orgs","repos_url":"https://api.github.com/users/otheruser/repos","events_url":"https://api.github.com/users/otheruser/events{/privacy}","received_events_url":"https://api.github.com/users/otheruser/received_events","type":"User","site_admin":false}}`
	note, _, err := parseEvent(name, json)

	if err != nil {
		t.Errorf("Error: %s", err)
	}

	assert(t, note.Message == "New star for owninguser/repositoryname by otheruser.", "Message incorrect")
	assert(t, note.URL == "https://github.com/otheruser", "URL incorrect")
}

func TestFork(t *testing.T) {
	name := "fork"
	json := `{"forkee":{"id":48730440,"name":"repositoryname","full_name":"otheruser/repositoryname","owner":{"login":"otheruser","id":1062602,"avatar_url":"https://avatars.githubusercontent.com/u/1062602?v=3","gravatar_id":"","url":"https://api.github.com/users/otheruser","html_url":"https://github.com/otheruser","followers_url":"https://api.github.com/users/otheruser/followers","following_url":"https://api.github.com/users/otheruser/following{/other_user}","gists_url":"https://api.github.com/users/otheruser/gists{/gist_id}","starred_url":"https://api.github.com/users/otheruser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/otheruser/subscriptions","organizations_url":"https://api.github.com/users/otheruser/orgs","repos_url":"https://api.github.com/users/otheruser/repos","events_url":"https://api.github.com/users/otheruser/events{/privacy}","received_events_url":"https://api.github.com/users/otheruser/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/otheruser/repositoryname","description":"","fork":true,"url":"https://api.github.com/repos/otheruser/repositoryname","forks_url":"https://api.github.com/repos/otheruser/repositoryname/forks","keys_url":"https://api.github.com/repos/otheruser/repositoryname/keys{/key_id}","collaborators_url":"https://api.github.com/repos/otheruser/repositoryname/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/otheruser/repositoryname/teams","hooks_url":"https://api.github.com/repos/otheruser/repositoryname/hooks","issue_events_url":"https://api.github.com/repos/otheruser/repositoryname/issues/events{/number}","events_url":"https://api.github.com/repos/otheruser/repositoryname/events","assignees_url":"https://api.github.com/repos/otheruser/repositoryname/assignees{/user}","branches_url":"https://api.github.com/repos/otheruser/repositoryname/branches{/branch}","tags_url":"https://api.github.com/repos/otheruser/repositoryname/tags","blobs_url":"https://api.github.com/repos/otheruser/repositoryname/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/otheruser/repositoryname/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/otheruser/repositoryname/git/refs{/sha}","trees_url":"https://api.github.com/repos/otheruser/repositoryname/git/trees{/sha}","statuses_url":"https://api.github.com/repos/otheruser/repositoryname/statuses/{sha}","languages_url":"https://api.github.com/repos/otheruser/repositoryname/languages","stargazers_url":"https://api.github.com/repos/otheruser/repositoryname/stargazers","contributors_url":"https://api.github.com/repos/otheruser/repositoryname/contributors","subscribers_url":"https://api.github.com/repos/otheruser/repositoryname/subscribers","subscription_url":"https://api.github.com/repos/otheruser/repositoryname/subscription","commits_url":"https://api.github.com/repos/otheruser/repositoryname/commits{/sha}","git_commits_url":"https://api.github.com/repos/otheruser/repositoryname/git/commits{/sha}","comments_url":"https://api.github.com/repos/otheruser/repositoryname/comments{/number}","issue_comment_url":"https://api.github.com/repos/otheruser/repositoryname/issues/comments{/number}","contents_url":"https://api.github.com/repos/otheruser/repositoryname/contents/{+path}","compare_url":"https://api.github.com/repos/otheruser/repositoryname/compare/{base}...{head}","merges_url":"https://api.github.com/repos/otheruser/repositoryname/merges","archive_url":"https://api.github.com/repos/otheruser/repositoryname/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/otheruser/repositoryname/downloads","issues_url":"https://api.github.com/repos/otheruser/repositoryname/issues{/number}","pulls_url":"https://api.github.com/repos/otheruser/repositoryname/pulls{/number}","milestones_url":"https://api.github.com/repos/otheruser/repositoryname/milestones{/number}","notifications_url":"https://api.github.com/repos/otheruser/repositoryname/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/otheruser/repositoryname/labels{/name}","releases_url":"https://api.github.com/repos/otheruser/repositoryname/releases{/id}","created_at":"2015-12-29T06:00:21Z","updated_at":"2015-12-29T06:00:09Z","pushed_at":"2015-12-29T05:37:45Z","git_url":"git://github.com/otheruser/repositoryname.git","ssh_url":"git@github.com:otheruser/repositoryname.git","clone_url":"https://github.com/otheruser/repositoryname.git","svn_url":"https://github.com/otheruser/repositoryname","homepage":null,"size":0,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"open_issues_count":0,"forks":0,"open_issues":0,"watchers":0,"default_branch":"master","public":true},"repository":{"id":48729606,"name":"repositoryname","full_name":"owninguser/repositoryname","owner":{"login":"owninguser","id":8082,"avatar_url":"https://avatars.githubusercontent.com/u/8082?v=3","gravatar_id":"","url":"https://api.github.com/users/owninguser","html_url":"https://github.com/owninguser","followers_url":"https://api.github.com/users/owninguser/followers","following_url":"https://api.github.com/users/owninguser/following{/other_user}","gists_url":"https://api.github.com/users/owninguser/gists{/gist_id}","starred_url":"https://api.github.com/users/owninguser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owninguser/subscriptions","organizations_url":"https://api.github.com/users/owninguser/orgs","repos_url":"https://api.github.com/users/owninguser/repos","events_url":"https://api.github.com/users/owninguser/events{/privacy}","received_events_url":"https://api.github.com/users/owninguser/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/owninguser/repositoryname","description":"","fork":false,"url":"https://api.github.com/repos/owninguser/repositoryname","forks_url":"https://api.github.com/repos/owninguser/repositoryname/forks","keys_url":"https://api.github.com/repos/owninguser/repositoryname/keys{/key_id}","collaborators_url":"https://api.github.com/repos/owninguser/repositoryname/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/owninguser/repositoryname/teams","hooks_url":"https://api.github.com/repos/owninguser/repositoryname/hooks","issue_events_url":"https://api.github.com/repos/owninguser/repositoryname/issues/events{/number}","events_url":"https://api.github.com/repos/owninguser/repositoryname/events","assignees_url":"https://api.github.com/repos/owninguser/repositoryname/assignees{/user}","branches_url":"https://api.github.com/repos/owninguser/repositoryname/branches{/branch}","tags_url":"https://api.github.com/repos/owninguser/repositoryname/tags","blobs_url":"https://api.github.com/repos/owninguser/repositoryname/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/owninguser/repositoryname/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/owninguser/repositoryname/git/refs{/sha}","trees_url":"https://api.github.com/repos/owninguser/repositoryname/git/trees{/sha}","statuses_url":"https://api.github.com/repos/owninguser/repositoryname/statuses/{sha}","languages_url":"https://api.github.com/repos/owninguser/repositoryname/languages","stargazers_url":"https://api.github.com/repos/owninguser/repositoryname/stargazers","contributors_url":"https://api.github.com/repos/owninguser/repositoryname/contributors","subscribers_url":"https://api.github.com/repos/owninguser/repositoryname/subscribers","subscription_url":"https://api.github.com/repos/owninguser/repositoryname/subscription","commits_url":"https://api.github.com/repos/owninguser/repositoryname/commits{/sha}","git_commits_url":"https://api.github.com/repos/owninguser/repositoryname/git/commits{/sha}","comments_url":"https://api.github.com/repos/owninguser/repositoryname/comments{/number}","issue_comment_url":"https://api.github.com/repos/owninguser/repositoryname/issues/comments{/number}","contents_url":"https://api.github.com/repos/owninguser/repositoryname/contents/{+path}","compare_url":"https://api.github.com/repos/owninguser/repositoryname/compare/{base}...{head}","merges_url":"https://api.github.com/repos/owninguser/repositoryname/merges","archive_url":"https://api.github.com/repos/owninguser/repositoryname/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/owninguser/repositoryname/downloads","issues_url":"https://api.github.com/repos/owninguser/repositoryname/issues{/number}","pulls_url":"https://api.github.com/repos/owninguser/repositoryname/pulls{/number}","milestones_url":"https://api.github.com/repos/owninguser/repositoryname/milestones{/number}","notifications_url":"https://api.github.com/repos/owninguser/repositoryname/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/owninguser/repositoryname/labels{/name}","releases_url":"https://api.github.com/repos/owninguser/repositoryname/releases{/id}","created_at":"2015-12-29T05:37:45Z","updated_at":"2015-12-29T06:00:09Z","pushed_at":"2015-12-29T05:37:45Z","git_url":"git://github.com/owninguser/repositoryname.git","ssh_url":"git@github.com:owninguser/repositoryname.git","clone_url":"https://github.com/owninguser/repositoryname.git","svn_url":"https://github.com/owninguser/repositoryname","homepage":null,"size":0,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":1,"mirror_url":null,"open_issues_count":0,"forks":1,"open_issues":0,"watchers":0,"default_branch":"master"},"sender":{"login":"otheruser","id":1062602,"avatar_url":"https://avatars.githubusercontent.com/u/1062602?v=3","gravatar_id":"","url":"https://api.github.com/users/otheruser","html_url":"https://github.com/otheruser","followers_url":"https://api.github.com/users/otheruser/followers","following_url":"https://api.github.com/users/otheruser/following{/other_user}","gists_url":"https://api.github.com/users/otheruser/gists{/gist_id}","starred_url":"https://api.github.com/users/otheruser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/otheruser/subscriptions","organizations_url":"https://api.github.com/users/otheruser/orgs","repos_url":"https://api.github.com/users/otheruser/repos","events_url":"https://api.github.com/users/otheruser/events{/privacy}","received_events_url":"https://api.github.com/users/otheruser/received_events","type":"User","site_admin":false}}`
	note, _, err := parseEvent(name, json)

	if err != nil {
		t.Errorf("Error: %s", err)
	}

	assert(t, note.Message == "New fork for owninguser/repositoryname by otheruser.", "Message incorrect")
	assert(t, note.URL == "https://github.com/otheruser/repositoryname", "URL incorrect")
}

func TestPush(t *testing.T) {
	name := "push"
	json := `{"ref":"refs/heads/changes","before":"9049f1265b7d61be4a8904a9a27120d2064dab3b","after":"0d1a26e67d8f5eaf1f6ba5c57fc3c7d91ac0fd1c","created":false,"deleted":false,"forced":false,"base_ref":null,"compare":"https://github.com/baxterthehacker/public-repo/compare/9049f1265b7d...0d1a26e67d8f","commits":[{"id":"0d1a26e67d8f5eaf1f6ba5c57fc3c7d91ac0fd1c","tree_id":"f9d2a07e9488b91af2641b26b9407fe22a451433","distinct":true,"message":"Update README.md","timestamp":"2015-05-05T19:40:15-04:00","url":"https://github.com/baxterthehacker/public-repo/commit/0d1a26e67d8f5eaf1f6ba5c57fc3c7d91ac0fd1c","author":{"name":"baxterthehacker","email":"baxterthehacker@users.noreply.github.com","username":"baxterthehacker"},"committer":{"name":"baxterthehacker","email":"baxterthehacker@users.noreply.github.com","username":"baxterthehacker"},"added":[],"removed":[],"modified":["README.md"]}],"head_commit":{"id":"0d1a26e67d8f5eaf1f6ba5c57fc3c7d91ac0fd1c","tree_id":"f9d2a07e9488b91af2641b26b9407fe22a451433","distinct":true,"message":"Update README.md","timestamp":"2015-05-05T19:40:15-04:00","url":"https://github.com/baxterthehacker/public-repo/commit/0d1a26e67d8f5eaf1f6ba5c57fc3c7d91ac0fd1c","author":{"name":"baxterthehacker","email":"baxterthehacker@users.noreply.github.com","username":"baxterthehacker"},"committer":{"name":"baxterthehacker","email":"baxterthehacker@users.noreply.github.com","username":"baxterthehacker"},"added":[],"removed":[],"modified":["README.md"]},"repository":{"id":35129377,"name":"public-repo","full_name":"baxterthehacker/public-repo","owner":{"name":"baxterthehacker","email":"baxterthehacker@users.noreply.github.com"},"private":false,"html_url":"https://github.com/baxterthehacker/public-repo","description":"","fork":false,"url":"https://github.com/baxterthehacker/public-repo","forks_url":"https://api.github.com/repos/baxterthehacker/public-repo/forks","keys_url":"https://api.github.com/repos/baxterthehacker/public-repo/keys{/key_id}","collaborators_url":"https://api.github.com/repos/baxterthehacker/public-repo/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/baxterthehacker/public-repo/teams","hooks_url":"https://api.github.com/repos/baxterthehacker/public-repo/hooks","issue_events_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/events{/number}","events_url":"https://api.github.com/repos/baxterthehacker/public-repo/events","assignees_url":"https://api.github.com/repos/baxterthehacker/public-repo/assignees{/user}","branches_url":"https://api.github.com/repos/baxterthehacker/public-repo/branches{/branch}","tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/tags","blobs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/refs{/sha}","trees_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/trees{/sha}","statuses_url":"https://api.github.com/repos/baxterthehacker/public-repo/statuses/{sha}","languages_url":"https://api.github.com/repos/baxterthehacker/public-repo/languages","stargazers_url":"https://api.github.com/repos/baxterthehacker/public-repo/stargazers","contributors_url":"https://api.github.com/repos/baxterthehacker/public-repo/contributors","subscribers_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscribers","subscription_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscription","commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/commits{/sha}","git_commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/commits{/sha}","comments_url":"https://api.github.com/repos/baxterthehacker/public-repo/comments{/number}","issue_comment_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/comments{/number}","contents_url":"https://api.github.com/repos/baxterthehacker/public-repo/contents/{+path}","compare_url":"https://api.github.com/repos/baxterthehacker/public-repo/compare/{base}...{head}","merges_url":"https://api.github.com/repos/baxterthehacker/public-repo/merges","archive_url":"https://api.github.com/repos/baxterthehacker/public-repo/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/baxterthehacker/public-repo/downloads","issues_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues{/number}","pulls_url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls{/number}","milestones_url":"https://api.github.com/repos/baxterthehacker/public-repo/milestones{/number}","notifications_url":"https://api.github.com/repos/baxterthehacker/public-repo/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/baxterthehacker/public-repo/labels{/name}","releases_url":"https://api.github.com/repos/baxterthehacker/public-repo/releases{/id}","created_at":1430869212,"updated_at":"2015-05-05T23:40:12Z","pushed_at":1430869217,"git_url":"git://github.com/baxterthehacker/public-repo.git","ssh_url":"git@github.com:baxterthehacker/public-repo.git","clone_url":"https://github.com/baxterthehacker/public-repo.git","svn_url":"https://github.com/baxterthehacker/public-repo","homepage":null,"size":0,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"forks_count":0,"mirror_url":null,"open_issues_count":0,"forks":0,"open_issues":0,"watchers":0,"default_branch":"master","stargazers":0,"master_branch":"master"},"pusher":{"name":"baxterthehacker","email":"baxterthehacker@users.noreply.github.com"},"sender":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false}}`
	note, _, err := parseEvent(name, json)

	if err != nil {
		t.Errorf("Error: %s", err)
	}

	assert(t, note.Message == "Push 1 commit(s) to changes in baxterthehacker/public-repo by baxterthehacker.", "Message incorrect")
	assert(t, note.URL == "https://github.com/baxterthehacker/public-repo/compare/9049f1265b7d...0d1a26e67d8f", "URL incorrect")
}

func TestIssueComment(t *testing.T) {
	name := "issue_comment"
	json := `{"action":"created","issue":{"url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/2","labels_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/2/labels{/name}","comments_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/2/comments","events_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/2/events","html_url":"https://github.com/baxterthehacker/public-repo/issues/2","id":73464126,"number":2,"title":"Spelling error in the README file","user":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/baxterthehacker/public-repo/labels/bug","name":"bug","color":"fc2929"}],"state":"open","locked":false,"assignee":null,"milestone":null,"comments":1,"created_at":"2015-05-05T23:40:28Z","updated_at":"2015-05-05T23:40:28Z","closed_at":null,"body":"It looks like you accidently spelled 'commit' with two 't's."},"comment":{"url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/comments/99262140","html_url":"https://github.com/baxterthehacker/public-repo/issues/2#issuecomment-99262140","issue_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/2","id":99262140,"user":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false},"created_at":"2015-05-05T23:40:28Z","updated_at":"2015-05-05T23:40:28Z","body":"You are totally right! I'll get this fixed right away."},"repository":{"id":35129377,"name":"public-repo","full_name":"baxterthehacker/public-repo","owner":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/baxterthehacker/public-repo","description":"","fork":false,"url":"https://api.github.com/repos/baxterthehacker/public-repo","forks_url":"https://api.github.com/repos/baxterthehacker/public-repo/forks","keys_url":"https://api.github.com/repos/baxterthehacker/public-repo/keys{/key_id}","collaborators_url":"https://api.github.com/repos/baxterthehacker/public-repo/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/baxterthehacker/public-repo/teams","hooks_url":"https://api.github.com/repos/baxterthehacker/public-repo/hooks","issue_events_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/events{/number}","events_url":"https://api.github.com/repos/baxterthehacker/public-repo/events","assignees_url":"https://api.github.com/repos/baxterthehacker/public-repo/assignees{/user}","branches_url":"https://api.github.com/repos/baxterthehacker/public-repo/branches{/branch}","tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/tags","blobs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/refs{/sha}","trees_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/trees{/sha}","statuses_url":"https://api.github.com/repos/baxterthehacker/public-repo/statuses/{sha}","languages_url":"https://api.github.com/repos/baxterthehacker/public-repo/languages","stargazers_url":"https://api.github.com/repos/baxterthehacker/public-repo/stargazers","contributors_url":"https://api.github.com/repos/baxterthehacker/public-repo/contributors","subscribers_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscribers","subscription_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscription","commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/commits{/sha}","git_commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/commits{/sha}","comments_url":"https://api.github.com/repos/baxterthehacker/public-repo/comments{/number}","issue_comment_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/comments{/number}","contents_url":"https://api.github.com/repos/baxterthehacker/public-repo/contents/{+path}","compare_url":"https://api.github.com/repos/baxterthehacker/public-repo/compare/{base}...{head}","merges_url":"https://api.github.com/repos/baxterthehacker/public-repo/merges","archive_url":"https://api.github.com/repos/baxterthehacker/public-repo/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/baxterthehacker/public-repo/downloads","issues_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues{/number}","pulls_url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls{/number}","milestones_url":"https://api.github.com/repos/baxterthehacker/public-repo/milestones{/number}","notifications_url":"https://api.github.com/repos/baxterthehacker/public-repo/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/baxterthehacker/public-repo/labels{/name}","releases_url":"https://api.github.com/repos/baxterthehacker/public-repo/releases{/id}","created_at":"2015-05-05T23:40:12Z","updated_at":"2015-05-05T23:40:12Z","pushed_at":"2015-05-05T23:40:27Z","git_url":"git://github.com/baxterthehacker/public-repo.git","ssh_url":"git@github.com:baxterthehacker/public-repo.git","clone_url":"https://github.com/baxterthehacker/public-repo.git","svn_url":"https://github.com/baxterthehacker/public-repo","homepage":null,"size":0,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"forks_count":0,"mirror_url":null,"open_issues_count":2,"forks":0,"open_issues":2,"watchers":0,"default_branch":"master"},"sender":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false}}`
	note, _, err := parseEvent(name, json)

	if err != nil {
		t.Errorf("Error: %s", err)
	}

	// fmt.Println(note.Message)
	// fmt.Println(note.URL)

	assert(t, note.Message == "Comment created on issue 2 (Spelling error in th...) on baxterthehacker/public-repo by baxterthehacker: You are totally right! I'll get this fix...", "Message incorrect")
	assert(t, note.URL == "https://github.com/baxterthehacker/public-repo/issues/2#issuecomment-99262140", "URL incorrect")
}

func TestIssues(t *testing.T) {
	name := "issues"
	json := `{"action":"opened","issue":{"url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/2","labels_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/2/labels{/name}","comments_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/2/comments","events_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/2/events","html_url":"https://github.com/baxterthehacker/public-repo/issues/2","id":73464126,"number":2,"title":"Spelling error in the README file","user":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false},"labels":[{"url":"https://api.github.com/repos/baxterthehacker/public-repo/labels/bug","name":"bug","color":"fc2929"}],"state":"open","locked":false,"assignee":null,"milestone":null,"comments":0,"created_at":"2015-05-05T23:40:28Z","updated_at":"2015-05-05T23:40:28Z","closed_at":null,"body":"It looks like you accidently spelled 'commit' with two 't's."},"repository":{"id":35129377,"name":"public-repo","full_name":"baxterthehacker/public-repo","owner":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/baxterthehacker/public-repo","description":"","fork":false,"url":"https://api.github.com/repos/baxterthehacker/public-repo","forks_url":"https://api.github.com/repos/baxterthehacker/public-repo/forks","keys_url":"https://api.github.com/repos/baxterthehacker/public-repo/keys{/key_id}","collaborators_url":"https://api.github.com/repos/baxterthehacker/public-repo/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/baxterthehacker/public-repo/teams","hooks_url":"https://api.github.com/repos/baxterthehacker/public-repo/hooks","issue_events_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/events{/number}","events_url":"https://api.github.com/repos/baxterthehacker/public-repo/events","assignees_url":"https://api.github.com/repos/baxterthehacker/public-repo/assignees{/user}","branches_url":"https://api.github.com/repos/baxterthehacker/public-repo/branches{/branch}","tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/tags","blobs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/refs{/sha}","trees_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/trees{/sha}","statuses_url":"https://api.github.com/repos/baxterthehacker/public-repo/statuses/{sha}","languages_url":"https://api.github.com/repos/baxterthehacker/public-repo/languages","stargazers_url":"https://api.github.com/repos/baxterthehacker/public-repo/stargazers","contributors_url":"https://api.github.com/repos/baxterthehacker/public-repo/contributors","subscribers_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscribers","subscription_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscription","commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/commits{/sha}","git_commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/commits{/sha}","comments_url":"https://api.github.com/repos/baxterthehacker/public-repo/comments{/number}","issue_comment_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/comments{/number}","contents_url":"https://api.github.com/repos/baxterthehacker/public-repo/contents/{+path}","compare_url":"https://api.github.com/repos/baxterthehacker/public-repo/compare/{base}...{head}","merges_url":"https://api.github.com/repos/baxterthehacker/public-repo/merges","archive_url":"https://api.github.com/repos/baxterthehacker/public-repo/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/baxterthehacker/public-repo/downloads","issues_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues{/number}","pulls_url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls{/number}","milestones_url":"https://api.github.com/repos/baxterthehacker/public-repo/milestones{/number}","notifications_url":"https://api.github.com/repos/baxterthehacker/public-repo/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/baxterthehacker/public-repo/labels{/name}","releases_url":"https://api.github.com/repos/baxterthehacker/public-repo/releases{/id}","created_at":"2015-05-05T23:40:12Z","updated_at":"2015-05-05T23:40:12Z","pushed_at":"2015-05-05T23:40:27Z","git_url":"git://github.com/baxterthehacker/public-repo.git","ssh_url":"git@github.com:baxterthehacker/public-repo.git","clone_url":"https://github.com/baxterthehacker/public-repo.git","svn_url":"https://github.com/baxterthehacker/public-repo","homepage":null,"size":0,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"forks_count":0,"mirror_url":null,"open_issues_count":2,"forks":0,"open_issues":2,"watchers":0,"default_branch":"master"},"sender":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false}}`
	note, _, err := parseEvent(name, json)

	if err != nil {
		t.Errorf("Error: %s", err)
	}

	// fmt.Println(note.Message)
	// fmt.Println(note.URL)

	assert(t, note.Message == "Issue 2 (Spelling error in th...) opened on baxterthehacker/public-repo by baxterthehacker.", "Message incorrect")
	assert(t, note.URL == "https://github.com/baxterthehacker/public-repo/issues/2", "URL incorrect")
}

func TestCreate(t *testing.T) {
	name := "create"
	json := `{"ref":"0.0.1","ref_type":"tag","master_branch":"master","description":"","pusher_type":"user","repository":{"id":35129377,"name":"public-repo","full_name":"baxterthehacker/public-repo","owner":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/baxterthehacker/public-repo","description":"","fork":false,"url":"https://api.github.com/repos/baxterthehacker/public-repo","forks_url":"https://api.github.com/repos/baxterthehacker/public-repo/forks","keys_url":"https://api.github.com/repos/baxterthehacker/public-repo/keys{/key_id}","collaborators_url":"https://api.github.com/repos/baxterthehacker/public-repo/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/baxterthehacker/public-repo/teams","hooks_url":"https://api.github.com/repos/baxterthehacker/public-repo/hooks","issue_events_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/events{/number}","events_url":"https://api.github.com/repos/baxterthehacker/public-repo/events","assignees_url":"https://api.github.com/repos/baxterthehacker/public-repo/assignees{/user}","branches_url":"https://api.github.com/repos/baxterthehacker/public-repo/branches{/branch}","tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/tags","blobs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/refs{/sha}","trees_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/trees{/sha}","statuses_url":"https://api.github.com/repos/baxterthehacker/public-repo/statuses/{sha}","languages_url":"https://api.github.com/repos/baxterthehacker/public-repo/languages","stargazers_url":"https://api.github.com/repos/baxterthehacker/public-repo/stargazers","contributors_url":"https://api.github.com/repos/baxterthehacker/public-repo/contributors","subscribers_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscribers","subscription_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscription","commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/commits{/sha}","git_commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/commits{/sha}","comments_url":"https://api.github.com/repos/baxterthehacker/public-repo/comments{/number}","issue_comment_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/comments{/number}","contents_url":"https://api.github.com/repos/baxterthehacker/public-repo/contents/{+path}","compare_url":"https://api.github.com/repos/baxterthehacker/public-repo/compare/{base}...{head}","merges_url":"https://api.github.com/repos/baxterthehacker/public-repo/merges","archive_url":"https://api.github.com/repos/baxterthehacker/public-repo/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/baxterthehacker/public-repo/downloads","issues_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues{/number}","pulls_url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls{/number}","milestones_url":"https://api.github.com/repos/baxterthehacker/public-repo/milestones{/number}","notifications_url":"https://api.github.com/repos/baxterthehacker/public-repo/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/baxterthehacker/public-repo/labels{/name}","releases_url":"https://api.github.com/repos/baxterthehacker/public-repo/releases{/id}","created_at":"2015-05-05T23:40:12Z","updated_at":"2015-05-05T23:40:30Z","pushed_at":"2015-05-05T23:40:38Z","git_url":"git://github.com/baxterthehacker/public-repo.git","ssh_url":"git@github.com:baxterthehacker/public-repo.git","clone_url":"https://github.com/baxterthehacker/public-repo.git","svn_url":"https://github.com/baxterthehacker/public-repo","homepage":null,"size":0,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"forks_count":0,"mirror_url":null,"open_issues_count":2,"forks":0,"open_issues":2,"watchers":0,"default_branch":"master"},"sender":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false}}`
	note, _, err := parseEvent(name, json)

	if err != nil {
		t.Errorf("Error: %s", err)
	}

	// fmt.Println(note.Message)
	// fmt.Println(note.URL)

	assert(t, note.Message == "New tag (0.0.1) for baxterthehacker/public-repo by baxterthehacker.", "Message incorrect")
	assert(t, note.URL == "https://github.com/baxterthehacker/public-repo/tree/0.0.1", "URL incorrect")
}

func TestDelete(t *testing.T) {
	name := "delete"
	json := `{"ref":"simple-tag","ref_type":"tag","pusher_type":"user","repository":{"id":35129377,"name":"public-repo","full_name":"baxterthehacker/public-repo","owner":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/baxterthehacker/public-repo","description":"","fork":false,"url":"https://api.github.com/repos/baxterthehacker/public-repo","forks_url":"https://api.github.com/repos/baxterthehacker/public-repo/forks","keys_url":"https://api.github.com/repos/baxterthehacker/public-repo/keys{/key_id}","collaborators_url":"https://api.github.com/repos/baxterthehacker/public-repo/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/baxterthehacker/public-repo/teams","hooks_url":"https://api.github.com/repos/baxterthehacker/public-repo/hooks","issue_events_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/events{/number}","events_url":"https://api.github.com/repos/baxterthehacker/public-repo/events","assignees_url":"https://api.github.com/repos/baxterthehacker/public-repo/assignees{/user}","branches_url":"https://api.github.com/repos/baxterthehacker/public-repo/branches{/branch}","tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/tags","blobs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/refs{/sha}","trees_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/trees{/sha}","statuses_url":"https://api.github.com/repos/baxterthehacker/public-repo/statuses/{sha}","languages_url":"https://api.github.com/repos/baxterthehacker/public-repo/languages","stargazers_url":"https://api.github.com/repos/baxterthehacker/public-repo/stargazers","contributors_url":"https://api.github.com/repos/baxterthehacker/public-repo/contributors","subscribers_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscribers","subscription_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscription","commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/commits{/sha}","git_commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/commits{/sha}","comments_url":"https://api.github.com/repos/baxterthehacker/public-repo/comments{/number}","issue_comment_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/comments{/number}","contents_url":"https://api.github.com/repos/baxterthehacker/public-repo/contents/{+path}","compare_url":"https://api.github.com/repos/baxterthehacker/public-repo/compare/{base}...{head}","merges_url":"https://api.github.com/repos/baxterthehacker/public-repo/merges","archive_url":"https://api.github.com/repos/baxterthehacker/public-repo/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/baxterthehacker/public-repo/downloads","issues_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues{/number}","pulls_url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls{/number}","milestones_url":"https://api.github.com/repos/baxterthehacker/public-repo/milestones{/number}","notifications_url":"https://api.github.com/repos/baxterthehacker/public-repo/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/baxterthehacker/public-repo/labels{/name}","releases_url":"https://api.github.com/repos/baxterthehacker/public-repo/releases{/id}","created_at":"2015-05-05T23:40:12Z","updated_at":"2015-05-05T23:40:30Z","pushed_at":"2015-05-05T23:40:40Z","git_url":"git://github.com/baxterthehacker/public-repo.git","ssh_url":"git@github.com:baxterthehacker/public-repo.git","clone_url":"https://github.com/baxterthehacker/public-repo.git","svn_url":"https://github.com/baxterthehacker/public-repo","homepage":null,"size":0,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"forks_count":0,"mirror_url":null,"open_issues_count":2,"forks":0,"open_issues":2,"watchers":0,"default_branch":"master"},"sender":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false}}`
	note, _, err := parseEvent(name, json)

	if err != nil {
		t.Errorf("Error: %s", err)
	}

	// fmt.Println(note.Message)
	// fmt.Println(note.URL)

	assert(t, note.Message == "Delete tag (simple-tag) for baxterthehacker/public-repo by baxterthehacker.", "Message incorrect")
	assert(t, note.URL == "https://github.com/baxterthehacker/public-repo/tree/simple-tag", "URL incorrect")
}

func TestPullRequest(t *testing.T) {
	name := "pull_request"
	json := `{"action":"opened","number":1,"pull_request":{"url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/1","id":34778301,"html_url":"https://github.com/baxterthehacker/public-repo/pull/1","diff_url":"https://github.com/baxterthehacker/public-repo/pull/1.diff","patch_url":"https://github.com/baxterthehacker/public-repo/pull/1.patch","issue_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/1","number":1,"state":"open","locked":false,"title":"Update the README with new information","user":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false},"body":"This is a pretty simple change that we need to pull into master.","created_at":"2015-05-05T23:40:27Z","updated_at":"2015-05-05T23:40:27Z","closed_at":null,"merged_at":null,"merge_commit_sha":null,"assignee":null,"milestone":null,"commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/1/commits","review_comments_url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/1/comments","review_comment_url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/comments{/number}","comments_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/1/comments","statuses_url":"https://api.github.com/repos/baxterthehacker/public-repo/statuses/0d1a26e67d8f5eaf1f6ba5c57fc3c7d91ac0fd1c","head":{"label":"baxterthehacker:changes","ref":"changes","sha":"0d1a26e67d8f5eaf1f6ba5c57fc3c7d91ac0fd1c","user":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false},"repo":{"id":35129377,"name":"public-repo","full_name":"baxterthehacker/public-repo","owner":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/baxterthehacker/public-repo","description":"","fork":false,"url":"https://api.github.com/repos/baxterthehacker/public-repo","forks_url":"https://api.github.com/repos/baxterthehacker/public-repo/forks","keys_url":"https://api.github.com/repos/baxterthehacker/public-repo/keys{/key_id}","collaborators_url":"https://api.github.com/repos/baxterthehacker/public-repo/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/baxterthehacker/public-repo/teams","hooks_url":"https://api.github.com/repos/baxterthehacker/public-repo/hooks","issue_events_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/events{/number}","events_url":"https://api.github.com/repos/baxterthehacker/public-repo/events","assignees_url":"https://api.github.com/repos/baxterthehacker/public-repo/assignees{/user}","branches_url":"https://api.github.com/repos/baxterthehacker/public-repo/branches{/branch}","tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/tags","blobs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/refs{/sha}","trees_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/trees{/sha}","statuses_url":"https://api.github.com/repos/baxterthehacker/public-repo/statuses/{sha}","languages_url":"https://api.github.com/repos/baxterthehacker/public-repo/languages","stargazers_url":"https://api.github.com/repos/baxterthehacker/public-repo/stargazers","contributors_url":"https://api.github.com/repos/baxterthehacker/public-repo/contributors","subscribers_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscribers","subscription_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscription","commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/commits{/sha}","git_commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/commits{/sha}","comments_url":"https://api.github.com/repos/baxterthehacker/public-repo/comments{/number}","issue_comment_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/comments{/number}","contents_url":"https://api.github.com/repos/baxterthehacker/public-repo/contents/{+path}","compare_url":"https://api.github.com/repos/baxterthehacker/public-repo/compare/{base}...{head}","merges_url":"https://api.github.com/repos/baxterthehacker/public-repo/merges","archive_url":"https://api.github.com/repos/baxterthehacker/public-repo/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/baxterthehacker/public-repo/downloads","issues_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues{/number}","pulls_url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls{/number}","milestones_url":"https://api.github.com/repos/baxterthehacker/public-repo/milestones{/number}","notifications_url":"https://api.github.com/repos/baxterthehacker/public-repo/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/baxterthehacker/public-repo/labels{/name}","releases_url":"https://api.github.com/repos/baxterthehacker/public-repo/releases{/id}","created_at":"2015-05-05T23:40:12Z","updated_at":"2015-05-05T23:40:12Z","pushed_at":"2015-05-05T23:40:26Z","git_url":"git://github.com/baxterthehacker/public-repo.git","ssh_url":"git@github.com:baxterthehacker/public-repo.git","clone_url":"https://github.com/baxterthehacker/public-repo.git","svn_url":"https://github.com/baxterthehacker/public-repo","homepage":null,"size":0,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"forks_count":0,"mirror_url":null,"open_issues_count":1,"forks":0,"open_issues":1,"watchers":0,"default_branch":"master"}},"base":{"label":"baxterthehacker:master","ref":"master","sha":"9049f1265b7d61be4a8904a9a27120d2064dab3b","user":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false},"repo":{"id":35129377,"name":"public-repo","full_name":"baxterthehacker/public-repo","owner":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/baxterthehacker/public-repo","description":"","fork":false,"url":"https://api.github.com/repos/baxterthehacker/public-repo","forks_url":"https://api.github.com/repos/baxterthehacker/public-repo/forks","keys_url":"https://api.github.com/repos/baxterthehacker/public-repo/keys{/key_id}","collaborators_url":"https://api.github.com/repos/baxterthehacker/public-repo/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/baxterthehacker/public-repo/teams","hooks_url":"https://api.github.com/repos/baxterthehacker/public-repo/hooks","issue_events_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/events{/number}","events_url":"https://api.github.com/repos/baxterthehacker/public-repo/events","assignees_url":"https://api.github.com/repos/baxterthehacker/public-repo/assignees{/user}","branches_url":"https://api.github.com/repos/baxterthehacker/public-repo/branches{/branch}","tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/tags","blobs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/refs{/sha}","trees_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/trees{/sha}","statuses_url":"https://api.github.com/repos/baxterthehacker/public-repo/statuses/{sha}","languages_url":"https://api.github.com/repos/baxterthehacker/public-repo/languages","stargazers_url":"https://api.github.com/repos/baxterthehacker/public-repo/stargazers","contributors_url":"https://api.github.com/repos/baxterthehacker/public-repo/contributors","subscribers_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscribers","subscription_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscription","commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/commits{/sha}","git_commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/commits{/sha}","comments_url":"https://api.github.com/repos/baxterthehacker/public-repo/comments{/number}","issue_comment_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/comments{/number}","contents_url":"https://api.github.com/repos/baxterthehacker/public-repo/contents/{+path}","compare_url":"https://api.github.com/repos/baxterthehacker/public-repo/compare/{base}...{head}","merges_url":"https://api.github.com/repos/baxterthehacker/public-repo/merges","archive_url":"https://api.github.com/repos/baxterthehacker/public-repo/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/baxterthehacker/public-repo/downloads","issues_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues{/number}","pulls_url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls{/number}","milestones_url":"https://api.github.com/repos/baxterthehacker/public-repo/milestones{/number}","notifications_url":"https://api.github.com/repos/baxterthehacker/public-repo/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/baxterthehacker/public-repo/labels{/name}","releases_url":"https://api.github.com/repos/baxterthehacker/public-repo/releases{/id}","created_at":"2015-05-05T23:40:12Z","updated_at":"2015-05-05T23:40:12Z","pushed_at":"2015-05-05T23:40:26Z","git_url":"git://github.com/baxterthehacker/public-repo.git","ssh_url":"git@github.com:baxterthehacker/public-repo.git","clone_url":"https://github.com/baxterthehacker/public-repo.git","svn_url":"https://github.com/baxterthehacker/public-repo","homepage":null,"size":0,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"forks_count":0,"mirror_url":null,"open_issues_count":1,"forks":0,"open_issues":1,"watchers":0,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/1"},"html":{"href":"https://github.com/baxterthehacker/public-repo/pull/1"},"issue":{"href":"https://api.github.com/repos/baxterthehacker/public-repo/issues/1"},"comments":{"href":"https://api.github.com/repos/baxterthehacker/public-repo/issues/1/comments"},"review_comments":{"href":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/1/comments"},"review_comment":{"href":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/1/commits"},"statuses":{"href":"https://api.github.com/repos/baxterthehacker/public-repo/statuses/0d1a26e67d8f5eaf1f6ba5c57fc3c7d91ac0fd1c"}},"merged":false,"mergeable":null,"mergeable_state":"unknown","merged_by":null,"comments":0,"review_comments":0,"commits":1,"additions":1,"deletions":1,"changed_files":1},"repository":{"id":35129377,"name":"public-repo","full_name":"baxterthehacker/public-repo","owner":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/baxterthehacker/public-repo","description":"","fork":false,"url":"https://api.github.com/repos/baxterthehacker/public-repo","forks_url":"https://api.github.com/repos/baxterthehacker/public-repo/forks","keys_url":"https://api.github.com/repos/baxterthehacker/public-repo/keys{/key_id}","collaborators_url":"https://api.github.com/repos/baxterthehacker/public-repo/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/baxterthehacker/public-repo/teams","hooks_url":"https://api.github.com/repos/baxterthehacker/public-repo/hooks","issue_events_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/events{/number}","events_url":"https://api.github.com/repos/baxterthehacker/public-repo/events","assignees_url":"https://api.github.com/repos/baxterthehacker/public-repo/assignees{/user}","branches_url":"https://api.github.com/repos/baxterthehacker/public-repo/branches{/branch}","tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/tags","blobs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/refs{/sha}","trees_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/trees{/sha}","statuses_url":"https://api.github.com/repos/baxterthehacker/public-repo/statuses/{sha}","languages_url":"https://api.github.com/repos/baxterthehacker/public-repo/languages","stargazers_url":"https://api.github.com/repos/baxterthehacker/public-repo/stargazers","contributors_url":"https://api.github.com/repos/baxterthehacker/public-repo/contributors","subscribers_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscribers","subscription_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscription","commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/commits{/sha}","git_commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/commits{/sha}","comments_url":"https://api.github.com/repos/baxterthehacker/public-repo/comments{/number}","issue_comment_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/comments{/number}","contents_url":"https://api.github.com/repos/baxterthehacker/public-repo/contents/{+path}","compare_url":"https://api.github.com/repos/baxterthehacker/public-repo/compare/{base}...{head}","merges_url":"https://api.github.com/repos/baxterthehacker/public-repo/merges","archive_url":"https://api.github.com/repos/baxterthehacker/public-repo/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/baxterthehacker/public-repo/downloads","issues_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues{/number}","pulls_url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls{/number}","milestones_url":"https://api.github.com/repos/baxterthehacker/public-repo/milestones{/number}","notifications_url":"https://api.github.com/repos/baxterthehacker/public-repo/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/baxterthehacker/public-repo/labels{/name}","releases_url":"https://api.github.com/repos/baxterthehacker/public-repo/releases{/id}","created_at":"2015-05-05T23:40:12Z","updated_at":"2015-05-05T23:40:12Z","pushed_at":"2015-05-05T23:40:26Z","git_url":"git://github.com/baxterthehacker/public-repo.git","ssh_url":"git@github.com:baxterthehacker/public-repo.git","clone_url":"https://github.com/baxterthehacker/public-repo.git","svn_url":"https://github.com/baxterthehacker/public-repo","homepage":null,"size":0,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"forks_count":0,"mirror_url":null,"open_issues_count":1,"forks":0,"open_issues":1,"watchers":0,"default_branch":"master"},"sender":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false}}`
	note, _, err := parseEvent(name, json)

	if err != nil {
		t.Errorf("Error: %s", err)
	}

	// fmt.Println(note.Message)
	// fmt.Println(note.URL)

	assert(t, note.Message == "Pull request opened #1 (Update the README wi...) on baxterthehacker/public-repo by baxterthehacker: This is a pretty simple change that we n...", "Message incorrect")
	assert(t, note.URL == "https://github.com/baxterthehacker/public-repo/pull/1", "URL incorrect")
}

func TestPullRequestReview(t *testing.T) {
	name := "pull_request_review"
	json := `{"action":"submitted","review":{"id":2626884,"user":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false},"body":"Looks great!","submitted_at":"2016-10-03T23:39:09Z","state":"approved","html_url":"https://github.com/baxterthehacker/public-repo/pull/8#pullrequestreview-2626884","pull_request_url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/8","_links":{"html":{"href":"https://github.com/baxterthehacker/public-repo/pull/8#pullrequestreview-2626884"},"pull_request":{"href":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/8"}}},"pull_request":{"url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/8","id":87811438,"html_url":"https://github.com/baxterthehacker/public-repo/pull/8","diff_url":"https://github.com/baxterthehacker/public-repo/pull/8.diff","patch_url":"https://github.com/baxterthehacker/public-repo/pull/8.patch","issue_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/8","number":8,"state":"open","locked":false,"title":"Add a README description","user":{"login":"skalnik","id":2546,"avatar_url":"https://avatars.githubusercontent.com/u/2546?v=3","gravatar_id":"","url":"https://api.github.com/users/skalnik","html_url":"https://github.com/skalnik","followers_url":"https://api.github.com/users/skalnik/followers","following_url":"https://api.github.com/users/skalnik/following{/other_user}","gists_url":"https://api.github.com/users/skalnik/gists{/gist_id}","starred_url":"https://api.github.com/users/skalnik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skalnik/subscriptions","organizations_url":"https://api.github.com/users/skalnik/orgs","repos_url":"https://api.github.com/users/skalnik/repos","events_url":"https://api.github.com/users/skalnik/events{/privacy}","received_events_url":"https://api.github.com/users/skalnik/received_events","type":"User","site_admin":true},"body":"Just a few more details","created_at":"2016-10-03T23:37:43Z","updated_at":"2016-10-03T23:39:09Z","closed_at":null,"merged_at":null,"merge_commit_sha":"faea154a7decef6819754aab0f8c0e232e6c8b4f","assignee":null,"assignees":[],"milestone":null,"commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/8/commits","review_comments_url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/8/comments","review_comment_url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/comments{/number}","comments_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/8/comments","statuses_url":"https://api.github.com/repos/baxterthehacker/public-repo/statuses/b7a1f9c27caa4e03c14a88feb56e2d4f7500aa63","head":{"label":"skalnik:patch-2","ref":"patch-2","sha":"b7a1f9c27caa4e03c14a88feb56e2d4f7500aa63","user":{"login":"skalnik","id":2546,"avatar_url":"https://avatars.githubusercontent.com/u/2546?v=3","gravatar_id":"","url":"https://api.github.com/users/skalnik","html_url":"https://github.com/skalnik","followers_url":"https://api.github.com/users/skalnik/followers","following_url":"https://api.github.com/users/skalnik/following{/other_user}","gists_url":"https://api.github.com/users/skalnik/gists{/gist_id}","starred_url":"https://api.github.com/users/skalnik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skalnik/subscriptions","organizations_url":"https://api.github.com/users/skalnik/orgs","repos_url":"https://api.github.com/users/skalnik/repos","events_url":"https://api.github.com/users/skalnik/events{/privacy}","received_events_url":"https://api.github.com/users/skalnik/received_events","type":"User","site_admin":true},"repo":{"id":69919152,"name":"public-repo","full_name":"skalnik/public-repo","owner":{"login":"skalnik","id":2546,"avatar_url":"https://avatars.githubusercontent.com/u/2546?v=3","gravatar_id":"","url":"https://api.github.com/users/skalnik","html_url":"https://github.com/skalnik","followers_url":"https://api.github.com/users/skalnik/followers","following_url":"https://api.github.com/users/skalnik/following{/other_user}","gists_url":"https://api.github.com/users/skalnik/gists{/gist_id}","starred_url":"https://api.github.com/users/skalnik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skalnik/subscriptions","organizations_url":"https://api.github.com/users/skalnik/orgs","repos_url":"https://api.github.com/users/skalnik/repos","events_url":"https://api.github.com/users/skalnik/events{/privacy}","received_events_url":"https://api.github.com/users/skalnik/received_events","type":"User","site_admin":true},"private":false,"html_url":"https://github.com/skalnik/public-repo","description":null,"fork":true,"url":"https://api.github.com/repos/skalnik/public-repo","forks_url":"https://api.github.com/repos/skalnik/public-repo/forks","keys_url":"https://api.github.com/repos/skalnik/public-repo/keys{/key_id}","collaborators_url":"https://api.github.com/repos/skalnik/public-repo/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/skalnik/public-repo/teams","hooks_url":"https://api.github.com/repos/skalnik/public-repo/hooks","issue_events_url":"https://api.github.com/repos/skalnik/public-repo/issues/events{/number}","events_url":"https://api.github.com/repos/skalnik/public-repo/events","assignees_url":"https://api.github.com/repos/skalnik/public-repo/assignees{/user}","branches_url":"https://api.github.com/repos/skalnik/public-repo/branches{/branch}","tags_url":"https://api.github.com/repos/skalnik/public-repo/tags","blobs_url":"https://api.github.com/repos/skalnik/public-repo/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/skalnik/public-repo/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/skalnik/public-repo/git/refs{/sha}","trees_url":"https://api.github.com/repos/skalnik/public-repo/git/trees{/sha}","statuses_url":"https://api.github.com/repos/skalnik/public-repo/statuses/{sha}","languages_url":"https://api.github.com/repos/skalnik/public-repo/languages","stargazers_url":"https://api.github.com/repos/skalnik/public-repo/stargazers","contributors_url":"https://api.github.com/repos/skalnik/public-repo/contributors","subscribers_url":"https://api.github.com/repos/skalnik/public-repo/subscribers","subscription_url":"https://api.github.com/repos/skalnik/public-repo/subscription","commits_url":"https://api.github.com/repos/skalnik/public-repo/commits{/sha}","git_commits_url":"https://api.github.com/repos/skalnik/public-repo/git/commits{/sha}","comments_url":"https://api.github.com/repos/skalnik/public-repo/comments{/number}","issue_comment_url":"https://api.github.com/repos/skalnik/public-repo/issues/comments{/number}","contents_url":"https://api.github.com/repos/skalnik/public-repo/contents/{+path}","compare_url":"https://api.github.com/repos/skalnik/public-repo/compare/{base}...{head}","merges_url":"https://api.github.com/repos/skalnik/public-repo/merges","archive_url":"https://api.github.com/repos/skalnik/public-repo/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/skalnik/public-repo/downloads","issues_url":"https://api.github.com/repos/skalnik/public-repo/issues{/number}","pulls_url":"https://api.github.com/repos/skalnik/public-repo/pulls{/number}","milestones_url":"https://api.github.com/repos/skalnik/public-repo/milestones{/number}","notifications_url":"https://api.github.com/repos/skalnik/public-repo/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/skalnik/public-repo/labels{/name}","releases_url":"https://api.github.com/repos/skalnik/public-repo/releases{/id}","deployments_url":"https://api.github.com/repos/skalnik/public-repo/deployments","created_at":"2016-10-03T23:23:31Z","updated_at":"2016-08-15T17:19:01Z","pushed_at":"2016-10-03T23:36:52Z","git_url":"git://github.com/skalnik/public-repo.git","ssh_url":"git@github.com:skalnik/public-repo.git","clone_url":"https://github.com/skalnik/public-repo.git","svn_url":"https://github.com/skalnik/public-repo","homepage":null,"size":233,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"open_issues_count":0,"forks":0,"open_issues":0,"watchers":0,"default_branch":"master"}},"base":{"label":"baxterthehacker:master","ref":"master","sha":"9049f1265b7d61be4a8904a9a27120d2064dab3b","user":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false},"repo":{"id":35129377,"name":"public-repo","full_name":"baxterthehacker/public-repo","owner":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/baxterthehacker/public-repo","description":"","fork":false,"url":"https://api.github.com/repos/baxterthehacker/public-repo","forks_url":"https://api.github.com/repos/baxterthehacker/public-repo/forks","keys_url":"https://api.github.com/repos/baxterthehacker/public-repo/keys{/key_id}","collaborators_url":"https://api.github.com/repos/baxterthehacker/public-repo/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/baxterthehacker/public-repo/teams","hooks_url":"https://api.github.com/repos/baxterthehacker/public-repo/hooks","issue_events_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/events{/number}","events_url":"https://api.github.com/repos/baxterthehacker/public-repo/events","assignees_url":"https://api.github.com/repos/baxterthehacker/public-repo/assignees{/user}","branches_url":"https://api.github.com/repos/baxterthehacker/public-repo/branches{/branch}","tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/tags","blobs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/refs{/sha}","trees_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/trees{/sha}","statuses_url":"https://api.github.com/repos/baxterthehacker/public-repo/statuses/{sha}","languages_url":"https://api.github.com/repos/baxterthehacker/public-repo/languages","stargazers_url":"https://api.github.com/repos/baxterthehacker/public-repo/stargazers","contributors_url":"https://api.github.com/repos/baxterthehacker/public-repo/contributors","subscribers_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscribers","subscription_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscription","commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/commits{/sha}","git_commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/commits{/sha}","comments_url":"https://api.github.com/repos/baxterthehacker/public-repo/comments{/number}","issue_comment_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/comments{/number}","contents_url":"https://api.github.com/repos/baxterthehacker/public-repo/contents/{+path}","compare_url":"https://api.github.com/repos/baxterthehacker/public-repo/compare/{base}...{head}","merges_url":"https://api.github.com/repos/baxterthehacker/public-repo/merges","archive_url":"https://api.github.com/repos/baxterthehacker/public-repo/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/baxterthehacker/public-repo/downloads","issues_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues{/number}","pulls_url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls{/number}","milestones_url":"https://api.github.com/repos/baxterthehacker/public-repo/milestones{/number}","notifications_url":"https://api.github.com/repos/baxterthehacker/public-repo/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/baxterthehacker/public-repo/labels{/name}","releases_url":"https://api.github.com/repos/baxterthehacker/public-repo/releases{/id}","deployments_url":"https://api.github.com/repos/baxterthehacker/public-repo/deployments","created_at":"2015-05-05T23:40:12Z","updated_at":"2016-08-15T17:19:01Z","pushed_at":"2016-10-03T23:37:43Z","git_url":"git://github.com/baxterthehacker/public-repo.git","ssh_url":"git@github.com:baxterthehacker/public-repo.git","clone_url":"https://github.com/baxterthehacker/public-repo.git","svn_url":"https://github.com/baxterthehacker/public-repo","homepage":null,"size":233,"stargazers_count":2,"watchers_count":2,"language":null,"has_issues":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"forks_count":2,"mirror_url":null,"open_issues_count":5,"forks":2,"open_issues":5,"watchers":2,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/8"},"html":{"href":"https://github.com/baxterthehacker/public-repo/pull/8"},"issue":{"href":"https://api.github.com/repos/baxterthehacker/public-repo/issues/8"},"comments":{"href":"https://api.github.com/repos/baxterthehacker/public-repo/issues/8/comments"},"review_comments":{"href":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/8/comments"},"review_comment":{"href":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/8/commits"},"statuses":{"href":"https://api.github.com/repos/baxterthehacker/public-repo/statuses/b7a1f9c27caa4e03c14a88feb56e2d4f7500aa63"}}},"repository":{"id":35129377,"name":"public-repo","full_name":"baxterthehacker/public-repo","owner":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/baxterthehacker/public-repo","description":"","fork":false,"url":"https://api.github.com/repos/baxterthehacker/public-repo","forks_url":"https://api.github.com/repos/baxterthehacker/public-repo/forks","keys_url":"https://api.github.com/repos/baxterthehacker/public-repo/keys{/key_id}","collaborators_url":"https://api.github.com/repos/baxterthehacker/public-repo/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/baxterthehacker/public-repo/teams","hooks_url":"https://api.github.com/repos/baxterthehacker/public-repo/hooks","issue_events_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/events{/number}","events_url":"https://api.github.com/repos/baxterthehacker/public-repo/events","assignees_url":"https://api.github.com/repos/baxterthehacker/public-repo/assignees{/user}","branches_url":"https://api.github.com/repos/baxterthehacker/public-repo/branches{/branch}","tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/tags","blobs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/refs{/sha}","trees_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/trees{/sha}","statuses_url":"https://api.github.com/repos/baxterthehacker/public-repo/statuses/{sha}","languages_url":"https://api.github.com/repos/baxterthehacker/public-repo/languages","stargazers_url":"https://api.github.com/repos/baxterthehacker/public-repo/stargazers","contributors_url":"https://api.github.com/repos/baxterthehacker/public-repo/contributors","subscribers_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscribers","subscription_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscription","commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/commits{/sha}","git_commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/commits{/sha}","comments_url":"https://api.github.com/repos/baxterthehacker/public-repo/comments{/number}","issue_comment_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/comments{/number}","contents_url":"https://api.github.com/repos/baxterthehacker/public-repo/contents/{+path}","compare_url":"https://api.github.com/repos/baxterthehacker/public-repo/compare/{base}...{head}","merges_url":"https://api.github.com/repos/baxterthehacker/public-repo/merges","archive_url":"https://api.github.com/repos/baxterthehacker/public-repo/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/baxterthehacker/public-repo/downloads","issues_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues{/number}","pulls_url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls{/number}","milestones_url":"https://api.github.com/repos/baxterthehacker/public-repo/milestones{/number}","notifications_url":"https://api.github.com/repos/baxterthehacker/public-repo/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/baxterthehacker/public-repo/labels{/name}","releases_url":"https://api.github.com/repos/baxterthehacker/public-repo/releases{/id}","deployments_url":"https://api.github.com/repos/baxterthehacker/public-repo/deployments","created_at":"2015-05-05T23:40:12Z","updated_at":"2016-08-15T17:19:01Z","pushed_at":"2016-10-03T23:37:43Z","git_url":"git://github.com/baxterthehacker/public-repo.git","ssh_url":"git@github.com:baxterthehacker/public-repo.git","clone_url":"https://github.com/baxterthehacker/public-repo.git","svn_url":"https://github.com/baxterthehacker/public-repo","homepage":null,"size":233,"stargazers_count":2,"watchers_count":2,"language":null,"has_issues":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"forks_count":2,"mirror_url":null,"open_issues_count":5,"forks":2,"open_issues":5,"watchers":2,"default_branch":"master"},"sender":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false}}`
	note, _, err := parseEvent(name, json)

	if err != nil {
		t.Errorf("Error: %s", err)
	}

	// fmt.Println(note.Message)
	// fmt.Println(note.URL)

	assert(t, note.Message == "PR Review submitted (approved) on issue 8 (Add a README descrip...) on baxterthehacker/public-repo by baxterthehacker: Looks great!", "Message incorrect")
	assert(t, note.URL == "https://github.com/baxterthehacker/public-repo/pull/8#pullrequestreview-2626884", "URL incorrect")
}

func TestPullRequestReviewComment(t *testing.T) {
	name := "pull_request_review_comment"
	json := `{"action":"created","comment":{"url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/comments/29724692","id":29724692,"diff_hunk":"@@ -1 +1 @@\n-# public-repo","path":"README.md","position":1,"original_position":1,"commit_id":"0d1a26e67d8f5eaf1f6ba5c57fc3c7d91ac0fd1c","original_commit_id":"0d1a26e67d8f5eaf1f6ba5c57fc3c7d91ac0fd1c","user":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false},"body":"Maybe you should use more emojji on this line.","created_at":"2015-05-05T23:40:27Z","updated_at":"2015-05-05T23:40:27Z","html_url":"https://github.com/baxterthehacker/public-repo/pull/1#discussion_r29724692","pull_request_url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/1","_links":{"self":{"href":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/comments/29724692"},"html":{"href":"https://github.com/baxterthehacker/public-repo/pull/1#discussion_r29724692"},"pull_request":{"href":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/1"}}},"pull_request":{"url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/1","id":34778301,"html_url":"https://github.com/baxterthehacker/public-repo/pull/1","diff_url":"https://github.com/baxterthehacker/public-repo/pull/1.diff","patch_url":"https://github.com/baxterthehacker/public-repo/pull/1.patch","issue_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/1","number":1,"state":"open","locked":false,"title":"Update the README with new information","user":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false},"body":"This is a pretty simple change that we need to pull into master.","created_at":"2015-05-05T23:40:27Z","updated_at":"2015-05-05T23:40:27Z","closed_at":null,"merged_at":null,"merge_commit_sha":"18721552ba489fb84e12958c1b5694b5475f7991","assignee":null,"milestone":null,"commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/1/commits","review_comments_url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/1/comments","review_comment_url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/comments{/number}","comments_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/1/comments","statuses_url":"https://api.github.com/repos/baxterthehacker/public-repo/statuses/0d1a26e67d8f5eaf1f6ba5c57fc3c7d91ac0fd1c","head":{"label":"baxterthehacker:changes","ref":"changes","sha":"0d1a26e67d8f5eaf1f6ba5c57fc3c7d91ac0fd1c","user":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false},"repo":{"id":35129377,"name":"public-repo","full_name":"baxterthehacker/public-repo","owner":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/baxterthehacker/public-repo","description":"","fork":false,"url":"https://api.github.com/repos/baxterthehacker/public-repo","forks_url":"https://api.github.com/repos/baxterthehacker/public-repo/forks","keys_url":"https://api.github.com/repos/baxterthehacker/public-repo/keys{/key_id}","collaborators_url":"https://api.github.com/repos/baxterthehacker/public-repo/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/baxterthehacker/public-repo/teams","hooks_url":"https://api.github.com/repos/baxterthehacker/public-repo/hooks","issue_events_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/events{/number}","events_url":"https://api.github.com/repos/baxterthehacker/public-repo/events","assignees_url":"https://api.github.com/repos/baxterthehacker/public-repo/assignees{/user}","branches_url":"https://api.github.com/repos/baxterthehacker/public-repo/branches{/branch}","tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/tags","blobs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/refs{/sha}","trees_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/trees{/sha}","statuses_url":"https://api.github.com/repos/baxterthehacker/public-repo/statuses/{sha}","languages_url":"https://api.github.com/repos/baxterthehacker/public-repo/languages","stargazers_url":"https://api.github.com/repos/baxterthehacker/public-repo/stargazers","contributors_url":"https://api.github.com/repos/baxterthehacker/public-repo/contributors","subscribers_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscribers","subscription_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscription","commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/commits{/sha}","git_commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/commits{/sha}","comments_url":"https://api.github.com/repos/baxterthehacker/public-repo/comments{/number}","issue_comment_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/comments{/number}","contents_url":"https://api.github.com/repos/baxterthehacker/public-repo/contents/{+path}","compare_url":"https://api.github.com/repos/baxterthehacker/public-repo/compare/{base}...{head}","merges_url":"https://api.github.com/repos/baxterthehacker/public-repo/merges","archive_url":"https://api.github.com/repos/baxterthehacker/public-repo/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/baxterthehacker/public-repo/downloads","issues_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues{/number}","pulls_url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls{/number}","milestones_url":"https://api.github.com/repos/baxterthehacker/public-repo/milestones{/number}","notifications_url":"https://api.github.com/repos/baxterthehacker/public-repo/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/baxterthehacker/public-repo/labels{/name}","releases_url":"https://api.github.com/repos/baxterthehacker/public-repo/releases{/id}","created_at":"2015-05-05T23:40:12Z","updated_at":"2015-05-05T23:40:12Z","pushed_at":"2015-05-05T23:40:27Z","git_url":"git://github.com/baxterthehacker/public-repo.git","ssh_url":"git@github.com:baxterthehacker/public-repo.git","clone_url":"https://github.com/baxterthehacker/public-repo.git","svn_url":"https://github.com/baxterthehacker/public-repo","homepage":null,"size":0,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"forks_count":0,"mirror_url":null,"open_issues_count":1,"forks":0,"open_issues":1,"watchers":0,"default_branch":"master"}},"base":{"label":"baxterthehacker:master","ref":"master","sha":"9049f1265b7d61be4a8904a9a27120d2064dab3b","user":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false},"repo":{"id":35129377,"name":"public-repo","full_name":"baxterthehacker/public-repo","owner":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/baxterthehacker/public-repo","description":"","fork":false,"url":"https://api.github.com/repos/baxterthehacker/public-repo","forks_url":"https://api.github.com/repos/baxterthehacker/public-repo/forks","keys_url":"https://api.github.com/repos/baxterthehacker/public-repo/keys{/key_id}","collaborators_url":"https://api.github.com/repos/baxterthehacker/public-repo/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/baxterthehacker/public-repo/teams","hooks_url":"https://api.github.com/repos/baxterthehacker/public-repo/hooks","issue_events_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/events{/number}","events_url":"https://api.github.com/repos/baxterthehacker/public-repo/events","assignees_url":"https://api.github.com/repos/baxterthehacker/public-repo/assignees{/user}","branches_url":"https://api.github.com/repos/baxterthehacker/public-repo/branches{/branch}","tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/tags","blobs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/refs{/sha}","trees_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/trees{/sha}","statuses_url":"https://api.github.com/repos/baxterthehacker/public-repo/statuses/{sha}","languages_url":"https://api.github.com/repos/baxterthehacker/public-repo/languages","stargazers_url":"https://api.github.com/repos/baxterthehacker/public-repo/stargazers","contributors_url":"https://api.github.com/repos/baxterthehacker/public-repo/contributors","subscribers_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscribers","subscription_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscription","commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/commits{/sha}","git_commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/commits{/sha}","comments_url":"https://api.github.com/repos/baxterthehacker/public-repo/comments{/number}","issue_comment_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/comments{/number}","contents_url":"https://api.github.com/repos/baxterthehacker/public-repo/contents/{+path}","compare_url":"https://api.github.com/repos/baxterthehacker/public-repo/compare/{base}...{head}","merges_url":"https://api.github.com/repos/baxterthehacker/public-repo/merges","archive_url":"https://api.github.com/repos/baxterthehacker/public-repo/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/baxterthehacker/public-repo/downloads","issues_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues{/number}","pulls_url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls{/number}","milestones_url":"https://api.github.com/repos/baxterthehacker/public-repo/milestones{/number}","notifications_url":"https://api.github.com/repos/baxterthehacker/public-repo/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/baxterthehacker/public-repo/labels{/name}","releases_url":"https://api.github.com/repos/baxterthehacker/public-repo/releases{/id}","created_at":"2015-05-05T23:40:12Z","updated_at":"2015-05-05T23:40:12Z","pushed_at":"2015-05-05T23:40:27Z","git_url":"git://github.com/baxterthehacker/public-repo.git","ssh_url":"git@github.com:baxterthehacker/public-repo.git","clone_url":"https://github.com/baxterthehacker/public-repo.git","svn_url":"https://github.com/baxterthehacker/public-repo","homepage":null,"size":0,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"forks_count":0,"mirror_url":null,"open_issues_count":1,"forks":0,"open_issues":1,"watchers":0,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/1"},"html":{"href":"https://github.com/baxterthehacker/public-repo/pull/1"},"issue":{"href":"https://api.github.com/repos/baxterthehacker/public-repo/issues/1"},"comments":{"href":"https://api.github.com/repos/baxterthehacker/public-repo/issues/1/comments"},"review_comments":{"href":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/1/comments"},"review_comment":{"href":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/baxterthehacker/public-repo/pulls/1/commits"},"statuses":{"href":"https://api.github.com/repos/baxterthehacker/public-repo/statuses/0d1a26e67d8f5eaf1f6ba5c57fc3c7d91ac0fd1c"}}},"repository":{"id":35129377,"name":"public-repo","full_name":"baxterthehacker/public-repo","owner":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/baxterthehacker/public-repo","description":"","fork":false,"url":"https://api.github.com/repos/baxterthehacker/public-repo","forks_url":"https://api.github.com/repos/baxterthehacker/public-repo/forks","keys_url":"https://api.github.com/repos/baxterthehacker/public-repo/keys{/key_id}","collaborators_url":"https://api.github.com/repos/baxterthehacker/public-repo/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/baxterthehacker/public-repo/teams","hooks_url":"https://api.github.com/repos/baxterthehacker/public-repo/hooks","issue_events_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/events{/number}","events_url":"https://api.github.com/repos/baxterthehacker/public-repo/events","assignees_url":"https://api.github.com/repos/baxterthehacker/public-repo/assignees{/user}","branches_url":"https://api.github.com/repos/baxterthehacker/public-repo/branches{/branch}","tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/tags","blobs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/refs{/sha}","trees_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/trees{/sha}","statuses_url":"https://api.github.com/repos/baxterthehacker/public-repo/statuses/{sha}","languages_url":"https://api.github.com/repos/baxterthehacker/public-repo/languages","stargazers_url":"https://api.github.com/repos/baxterthehacker/public-repo/stargazers","contributors_url":"https://api.github.com/repos/baxterthehacker/public-repo/contributors","subscribers_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscribers","subscription_url":"https://api.github.com/repos/baxterthehacker/public-repo/subscription","commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/commits{/sha}","git_commits_url":"https://api.github.com/repos/baxterthehacker/public-repo/git/commits{/sha}","comments_url":"https://api.github.com/repos/baxterthehacker/public-repo/comments{/number}","issue_comment_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues/comments{/number}","contents_url":"https://api.github.com/repos/baxterthehacker/public-repo/contents/{+path}","compare_url":"https://api.github.com/repos/baxterthehacker/public-repo/compare/{base}...{head}","merges_url":"https://api.github.com/repos/baxterthehacker/public-repo/merges","archive_url":"https://api.github.com/repos/baxterthehacker/public-repo/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/baxterthehacker/public-repo/downloads","issues_url":"https://api.github.com/repos/baxterthehacker/public-repo/issues{/number}","pulls_url":"https://api.github.com/repos/baxterthehacker/public-repo/pulls{/number}","milestones_url":"https://api.github.com/repos/baxterthehacker/public-repo/milestones{/number}","notifications_url":"https://api.github.com/repos/baxterthehacker/public-repo/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/baxterthehacker/public-repo/labels{/name}","releases_url":"https://api.github.com/repos/baxterthehacker/public-repo/releases{/id}","created_at":"2015-05-05T23:40:12Z","updated_at":"2015-05-05T23:40:12Z","pushed_at":"2015-05-05T23:40:27Z","git_url":"git://github.com/baxterthehacker/public-repo.git","ssh_url":"git@github.com:baxterthehacker/public-repo.git","clone_url":"https://github.com/baxterthehacker/public-repo.git","svn_url":"https://github.com/baxterthehacker/public-repo","homepage":null,"size":0,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"forks_count":0,"mirror_url":null,"open_issues_count":1,"forks":0,"open_issues":1,"watchers":0,"default_branch":"master"},"sender":{"login":"baxterthehacker","id":6752317,"avatar_url":"https://avatars.githubusercontent.com/u/6752317?v=3","gravatar_id":"","url":"https://api.github.com/users/baxterthehacker","html_url":"https://github.com/baxterthehacker","followers_url":"https://api.github.com/users/baxterthehacker/followers","following_url":"https://api.github.com/users/baxterthehacker/following{/other_user}","gists_url":"https://api.github.com/users/baxterthehacker/gists{/gist_id}","starred_url":"https://api.github.com/users/baxterthehacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baxterthehacker/subscriptions","organizations_url":"https://api.github.com/users/baxterthehacker/orgs","repos_url":"https://api.github.com/users/baxterthehacker/repos","events_url":"https://api.github.com/users/baxterthehacker/events{/privacy}","received_events_url":"https://api.github.com/users/baxterthehacker/received_events","type":"User","site_admin":false}}`
	note, _, err := parseEvent(name, json)

	if err != nil {
		t.Errorf("Error: %s", err)
	}

	// fmt.Println(note.Message)
	// fmt.Println(note.URL)

	assert(t, note.Message == "PR Comment created on issue 1 (Update the README wi...) on baxterthehacker/public-repo by baxterthehacker: Maybe you should use more emojji on this...", "Message incorrect")
	assert(t, note.URL == "https://github.com/baxterthehacker/public-repo/pull/1#discussion_r29724692", "URL incorrect")
}

func TestPing(t *testing.T) {
	name := "ping"
	json := `{"zen":"Favor focus over features.","hook_id":6797079,"hook":{"url":"https://api.github.com/repos/owninguser/repositoryname/hooks/6797079","test_url":"https://api.github.com/repos/owninguser/repositoryname/hooks/6797079/test","ping_url":"https://api.github.com/repos/owninguser/repositoryname/hooks/6797079/pings","id":6797079,"name":"web","active":true,"events":["*"],"config":{"url":"http://digit.ndj.la:3000/","content_type":"json","insecure_ssl":"0","secret":"********"},"last_response":{"code":null,"status":"unused","message":null},"updated_at":"2015-12-29T05:38:21Z","created_at":"2015-12-29T05:38:21Z"},"repository":{"id":48729606,"name":"repositoryname","full_name":"owninguser/repositoryname","owner":{"login":"owninguser","id":8082,"avatar_url":"https://avatars.githubusercontent.com/u/8082?v=3","gravatar_id":"","url":"https://api.github.com/users/owninguser","html_url":"https://github.com/owninguser","followers_url":"https://api.github.com/users/owninguser/followers","following_url":"https://api.github.com/users/owninguser/following{/other_user}","gists_url":"https://api.github.com/users/owninguser/gists{/gist_id}","starred_url":"https://api.github.com/users/owninguser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owninguser/subscriptions","organizations_url":"https://api.github.com/users/owninguser/orgs","repos_url":"https://api.github.com/users/owninguser/repos","events_url":"https://api.github.com/users/owninguser/events{/privacy}","received_events_url":"https://api.github.com/users/owninguser/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/owninguser/repositoryname","description":"","fork":false,"url":"https://api.github.com/repos/owninguser/repositoryname","forks_url":"https://api.github.com/repos/owninguser/repositoryname/forks","keys_url":"https://api.github.com/repos/owninguser/repositoryname/keys{/key_id}","collaborators_url":"https://api.github.com/repos/owninguser/repositoryname/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/owninguser/repositoryname/teams","hooks_url":"https://api.github.com/repos/owninguser/repositoryname/hooks","issue_events_url":"https://api.github.com/repos/owninguser/repositoryname/issues/events{/number}","events_url":"https://api.github.com/repos/owninguser/repositoryname/events","assignees_url":"https://api.github.com/repos/owninguser/repositoryname/assignees{/user}","branches_url":"https://api.github.com/repos/owninguser/repositoryname/branches{/branch}","tags_url":"https://api.github.com/repos/owninguser/repositoryname/tags","blobs_url":"https://api.github.com/repos/owninguser/repositoryname/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/owninguser/repositoryname/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/owninguser/repositoryname/git/refs{/sha}","trees_url":"https://api.github.com/repos/owninguser/repositoryname/git/trees{/sha}","statuses_url":"https://api.github.com/repos/owninguser/repositoryname/statuses/{sha}","languages_url":"https://api.github.com/repos/owninguser/repositoryname/languages","stargazers_url":"https://api.github.com/repos/owninguser/repositoryname/stargazers","contributors_url":"https://api.github.com/repos/owninguser/repositoryname/contributors","subscribers_url":"https://api.github.com/repos/owninguser/repositoryname/subscribers","subscription_url":"https://api.github.com/repos/owninguser/repositoryname/subscription","commits_url":"https://api.github.com/repos/owninguser/repositoryname/commits{/sha}","git_commits_url":"https://api.github.com/repos/owninguser/repositoryname/git/commits{/sha}","comments_url":"https://api.github.com/repos/owninguser/repositoryname/comments{/number}","issue_comment_url":"https://api.github.com/repos/owninguser/repositoryname/issues/comments{/number}","contents_url":"https://api.github.com/repos/owninguser/repositoryname/contents/{+path}","compare_url":"https://api.github.com/repos/owninguser/repositoryname/compare/{base}...{head}","merges_url":"https://api.github.com/repos/owninguser/repositoryname/merges","archive_url":"https://api.github.com/repos/owninguser/repositoryname/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/owninguser/repositoryname/downloads","issues_url":"https://api.github.com/repos/owninguser/repositoryname/issues{/number}","pulls_url":"https://api.github.com/repos/owninguser/repositoryname/pulls{/number}","milestones_url":"https://api.github.com/repos/owninguser/repositoryname/milestones{/number}","notifications_url":"https://api.github.com/repos/owninguser/repositoryname/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/owninguser/repositoryname/labels{/name}","releases_url":"https://api.github.com/repos/owninguser/repositoryname/releases{/id}","created_at":"2015-12-29T05:37:45Z","updated_at":"2015-12-29T05:37:45Z","pushed_at":"2015-12-29T05:37:45Z","git_url":"git://github.com/owninguser/repositoryname.git","ssh_url":"git@github.com:owninguser/repositoryname.git","clone_url":"https://github.com/owninguser/repositoryname.git","svn_url":"https://github.com/owninguser/repositoryname","homepage":null,"size":0,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"open_issues_count":0,"forks":0,"open_issues":0,"watchers":0,"default_branch":"master"},"sender":{"login":"owninguser","id":8082,"avatar_url":"https://avatars.githubusercontent.com/u/8082?v=3","gravatar_id":"","url":"https://api.github.com/users/owninguser","html_url":"https://github.com/owninguser","followers_url":"https://api.github.com/users/owninguser/followers","following_url":"https://api.github.com/users/owninguser/following{/other_user}","gists_url":"https://api.github.com/users/owninguser/gists{/gist_id}","starred_url":"https://api.github.com/users/owninguser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owninguser/subscriptions","organizations_url":"https://api.github.com/users/owninguser/orgs","repos_url":"https://api.github.com/users/owninguser/repos","events_url":"https://api.github.com/users/owninguser/events{/privacy}","received_events_url":"https://api.github.com/users/owninguser/received_events","type":"User","site_admin":false}}`
	note, _, err := parseEvent(name, json)

	if err != nil {
		t.Errorf("Error: %s", err)
	}

	assert(t, note.Message == "Ping for owninguser/repositoryname by owninguser. Zen: Favor focus over features.", "Message incorrect")
	assert(t, note.URL == "https://github.com/owninguser/repositoryname", "URL incorrect")
}
